#include <stdio.h>  // Подключает стандартную библиотеку ввода-вывода.
                    // Эта библиотека содержит функции для работы с вводом и выводом,
                    // такие как printf (для вывода текста на экран).
#define N 20        // Определяет константу N со значением 20.
                    // #define - это директива препроцессора, которая заменяет все вхождения N на 20
                    // до компиляции кода.  N будет использоваться как размер массива sieve.

int main() {       // Объявляет главную функцию программы (точка входа).
                    // int main() - функция возвращает целое число (0 в случае успеха).

    int sieve[N] = {0};  // Объявляет целочисленный массив sieve размером N (20 элементов) и инициализирует все элементы нулями.
                         // - int sieve[N]:  Объявляет массив целых чисел с именем sieve и размером N (20).
                         // - {0}: Инициализирует все элементы массива значением 0.
                         // В данном коде 0 означает "потенциально простое число", а 1 означает "составное число".

    int i, j;              // Объявляет две целочисленные переменные i и j.
                           // Они будут использоваться в качестве счетчиков в циклах for.

    // Исключаем 0 и 1 (они не являются простыми)
    sieve[0] = sieve[1] = 1;  // Устанавливает значения элементов массива sieve с индексами 0 и 1 в 1.
                               // Это означает, что числа 0 и 1 помечаются как "составные" (не простые).

    // Реализуем алгоритм "Решето Эратосфена"
    for (i = 2; i * i < N; i++) {     // Внешний цикл for: проходит по всем числам от 2 до квадратного корня из N (не включая корень).
                                      // - i = 2: Начальное значение счетчика i.  Начинаем с 2, потому что 0 и 1 уже исключены.
                                      // - i * i < N: Условие продолжения цикла.  Цикл выполняется до тех пор, пока i * i меньше N.
                                      //   Достаточно проверять числа до квадратного корня из N, потому что если число N
                                      //   имеет делитель больше sqrt(N), то оно также имеет делитель меньше sqrt(N).
                                      // - i++: Инкремент счетчика i (увеличивает i на 1 после каждой итерации).

        if (sieve[i] == 0) {         // Если i - простое (то есть, sieve[i] равно 0), то выполняем внутренний цикл.
                                      //  sieve[i] == 0 проверяет, не было ли число i уже помечено как составное.

            for (j = i * i; j < N; j += i) {  // Внутренний цикл for: помечает все числа, кратные i, как составные.
                                               // - j = i * i: Начальное значение счетчика j.  Начинаем с i * i, потому что все числа, кратные i,
                                               //   меньшие i * i, уже были помечены как составные на предыдущих итерациях внешнего цикла.
                                               // - j < N: Условие продолжения цикла.  Цикл выполняется до тех пор, пока j меньше N.
                                               // - j += i:  Инкремент счетчика j (увеличивает j на i после каждой итерации).  Таким образом,
                                               //   j принимает значения i*i, i*i + i, i*i + 2i, ... (то есть, все кратные i, начиная с i*i).

                sieve[j] = 1;            // Помечаем число j как составное (устанавливаем sieve[j] в 1).
            }
        }
    }

    // Выводим простые числа
    printf("Prime numbers up to %d: ", N);  // Выводит на экран текст "Prime numbers up to 20: "
                                            // (где 20 - значение N, подставленное препроцессором).

    for (i = 2; i < N; i++) {          // Цикл for для перебора элементов массива sieve (от 2 до N-1).
                                        // Начинаем с 2, потому что 0 и 1 не являются простыми.
        if (sieve[i] == 0) {            // Если sieve[i] равно 0 (то есть, число i не помечено как составное), то...
            printf("%d ", i);          // ...выводим на экран число i (потому что это простое число).
        }
    }

    printf("\n");                      // Выводит символ новой строки, чтобы перевести курсор на следующую строку экрана.

    return 0;                          // Завершает программу и возвращает 0, указывая на успешное выполнение.
}

